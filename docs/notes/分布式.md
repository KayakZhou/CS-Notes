<!-- GFM-TOC -->
* [ä¸€ã€åˆ†å¸ƒå¼é”](#ä¸€åˆ†å¸ƒå¼é”)
    * [æ•°æ®åº“çš„å”¯ä¸€ç´¢å¼•](#æ•°æ®åº“çš„å”¯ä¸€ç´¢å¼•)
    * [Redis çš„ SETNX æŒ‡ä»¤](#redis-çš„-setnx-æŒ‡ä»¤)
    * [Redis çš„ RedLock ç®—æ³•](#redis-çš„-redlock-ç®—æ³•)
    * [Zookeeper çš„æœ‰åºèŠ‚ç‚¹](#zookeeper-çš„æœ‰åºèŠ‚ç‚¹)
* [äºŒã€åˆ†å¸ƒå¼äº‹åŠ¡](#äºŒåˆ†å¸ƒå¼äº‹åŠ¡)
    * [æœ¬åœ°æ¶ˆæ¯è¡¨](#æœ¬åœ°æ¶ˆæ¯è¡¨)
    * [2PC](#2pc)
* [ä¸‰ã€CAP](#ä¸‰cap)
    * [ä¸€è‡´æ€§](#ä¸€è‡´æ€§)
    * [å¯ç”¨æ€§](#å¯ç”¨æ€§)
    * [åˆ†åŒºå®¹å¿æ€§](#åˆ†åŒºå®¹å¿æ€§)
    * [æƒè¡¡](#æƒè¡¡)
* [å››ã€BASE](#å››base)
    * [åŸºæœ¬å¯ç”¨](#åŸºæœ¬å¯ç”¨)
    * [è½¯çŠ¶æ€](#è½¯çŠ¶æ€)
    * [æœ€ç»ˆä¸€è‡´æ€§](#æœ€ç»ˆä¸€è‡´æ€§)
* [äº”ã€Paxos](#äº”paxos)
    * [æ‰§è¡Œè¿‡ç¨‹](#æ‰§è¡Œè¿‡ç¨‹)
    * [çº¦æŸæ¡ä»¶](#çº¦æŸæ¡ä»¶)
* [å…­ã€Raft](#å…­raft)
    * [å•ä¸ª Candidate çš„ç«é€‰](#å•ä¸ª-candidate-çš„ç«é€‰)
    * [å¤šä¸ª Candidate ç«é€‰](#å¤šä¸ª-candidate-ç«é€‰)
    * [æ•°æ®åŒæ­¥](#æ•°æ®åŒæ­¥)
* [å‚è€ƒ](#å‚è€ƒ)
<!-- GFM-TOC -->


# ä¸€ã€åˆ†å¸ƒå¼é”

åœ¨å•æœºåœºæ™¯ä¸‹ï¼Œå¯ä»¥ä½¿ç”¨è¯­è¨€çš„å†…ç½®é”æ¥å®ç°è¿›ç¨‹åŒæ­¥ã€‚ä½†æ˜¯åœ¨åˆ†å¸ƒå¼åœºæ™¯ä¸‹ï¼Œéœ€è¦åŒæ­¥çš„è¿›ç¨‹å¯èƒ½ä½äºä¸åŒçš„èŠ‚ç‚¹ä¸Šï¼Œé‚£ä¹ˆå°±éœ€è¦ä½¿ç”¨åˆ†å¸ƒå¼é”ã€‚

é˜»å¡é”é€šå¸¸ä½¿ç”¨äº’æ–¥é‡æ¥å®ç°ï¼š

- äº’æ–¥é‡ä¸º 0 è¡¨ç¤ºæœ‰å…¶å®ƒè¿›ç¨‹åœ¨ä½¿ç”¨é”ï¼Œæ­¤æ—¶å¤„äºé”å®šçŠ¶æ€ï¼›
- äº’æ–¥é‡ä¸º 1 è¡¨ç¤ºæœªé”å®šçŠ¶æ€ã€‚

1 å’Œ 0 å¯ä»¥ç”¨ä¸€ä¸ªæ•´å‹å€¼è¡¨ç¤ºï¼Œä¹Ÿå¯ä»¥ç”¨æŸä¸ªæ•°æ®æ˜¯å¦å­˜åœ¨è¡¨ç¤ºã€‚

## æ•°æ®åº“çš„å”¯ä¸€ç´¢å¼•

è·å¾—é”æ—¶å‘è¡¨ä¸­æ’å…¥ä¸€æ¡è®°å½•ï¼Œé‡Šæ”¾é”æ—¶åˆ é™¤è¿™æ¡è®°å½•ã€‚å”¯ä¸€ç´¢å¼•å¯ä»¥ä¿è¯è¯¥è®°å½•åªè¢«æ’å…¥ä¸€æ¬¡ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç”¨è¿™ä¸ªè®°å½•æ˜¯å¦å­˜åœ¨æ¥åˆ¤æ–­æ˜¯å¦å­˜äºé”å®šçŠ¶æ€ã€‚

å­˜åœ¨ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ï¼š

- é”æ²¡æœ‰å¤±æ•ˆæ—¶é—´ï¼Œè§£é”å¤±è´¥çš„è¯å…¶å®ƒè¿›ç¨‹æ— æ³•å†è·å¾—è¯¥é”ã€‚
- åªèƒ½æ˜¯éé˜»å¡é”ï¼Œæ’å…¥å¤±è´¥ç›´æ¥å°±æŠ¥é”™äº†ï¼Œæ— æ³•é‡è¯•ã€‚
- ä¸å¯é‡å…¥ï¼Œå·²ç»è·å¾—é”çš„è¿›ç¨‹ä¹Ÿå¿…é¡»é‡æ–°è·å–é”ã€‚

## Redis çš„ SETNX æŒ‡ä»¤

ä½¿ç”¨ SETNXï¼ˆset if not existï¼‰æŒ‡ä»¤æ’å…¥ä¸€ä¸ªé”®å€¼å¯¹ï¼Œå¦‚æœ Key å·²ç»å­˜åœ¨ï¼Œé‚£ä¹ˆä¼šè¿”å› Falseï¼Œå¦åˆ™æ’å…¥æˆåŠŸå¹¶è¿”å› Trueã€‚

SETNX æŒ‡ä»¤å’Œæ•°æ®åº“çš„å”¯ä¸€ç´¢å¼•ç±»ä¼¼ï¼Œä¿è¯äº†åªå­˜åœ¨ä¸€ä¸ª Key çš„é”®å€¼å¯¹ï¼Œé‚£ä¹ˆå¯ä»¥ç”¨ä¸€ä¸ª Key çš„é”®å€¼å¯¹æ˜¯å¦å­˜åœ¨æ¥åˆ¤æ–­æ˜¯å¦å­˜äºé”å®šçŠ¶æ€ã€‚

EXPIRE æŒ‡ä»¤å¯ä»¥ä¸ºä¸€ä¸ªé”®å€¼å¯¹è®¾ç½®ä¸€ä¸ªè¿‡æœŸæ—¶é—´ï¼Œä»è€Œé¿å…äº†æ•°æ®åº“å”¯ä¸€ç´¢å¼•å®ç°æ–¹å¼ä¸­é‡Šæ”¾é”å¤±è´¥çš„é—®é¢˜ã€‚

## Redis çš„ RedLock ç®—æ³•

ä½¿ç”¨äº†å¤šä¸ª Redis å®ä¾‹æ¥å®ç°åˆ†å¸ƒå¼é”ï¼Œè¿™æ˜¯ä¸ºäº†ä¿è¯åœ¨å‘ç”Ÿå•ç‚¹æ•…éšœæ—¶ä»ç„¶å¯ç”¨ã€‚

- å°è¯•ä» N ä¸ªç›¸äº’ç‹¬ç«‹ Redis å®ä¾‹è·å–é”ï¼›
- è®¡ç®—è·å–é”æ¶ˆè€—çš„æ—¶é—´ï¼Œåªæœ‰å½“è¿™ä¸ªæ—¶é—´å°äºé”çš„è¿‡æœŸæ—¶é—´ï¼Œå¹¶ä¸”ä»å¤§å¤šæ•°ï¼ˆN / 2 + 1ï¼‰å®ä¾‹ä¸Šè·å–äº†é”ï¼Œé‚£ä¹ˆå°±è®¤ä¸ºé”è·å–æˆåŠŸäº†ï¼›
- å¦‚æœé”è·å–å¤±è´¥ï¼Œå°±åˆ°æ¯ä¸ªå®ä¾‹ä¸Šé‡Šæ”¾é”ã€‚

## Zookeeper çš„æœ‰åºèŠ‚ç‚¹

### 1. Zookeeper æŠ½è±¡æ¨¡å‹

Zookeeper æä¾›äº†ä¸€ç§æ ‘å½¢ç»“æ„çº§çš„å‘½åç©ºé—´ï¼Œ/app1/p_1 èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ä¸º /app1ã€‚

![img](/pics/b3a421e3-41b4-4e99-b612-bc695a7f622f.jpg)

### 2. èŠ‚ç‚¹ç±»å‹

- æ°¸ä¹…èŠ‚ç‚¹ï¼šä¸ä¼šå› ä¸ºä¼šè¯ç»“æŸæˆ–è€…è¶…æ—¶è€Œæ¶ˆå¤±ï¼›
- ä¸´æ—¶èŠ‚ç‚¹ï¼šå¦‚æœä¼šè¯ç»“æŸæˆ–è€…è¶…æ—¶å°±ä¼šæ¶ˆå¤±ï¼›
- æœ‰åºèŠ‚ç‚¹ï¼šä¼šåœ¨èŠ‚ç‚¹åçš„åé¢åŠ ä¸€ä¸ªæ•°å­—åç¼€ï¼Œå¹¶ä¸”æ˜¯æœ‰åºçš„ï¼Œä¾‹å¦‚ç”Ÿæˆçš„æœ‰åºèŠ‚ç‚¹ä¸º /lock/node-0000000000ï¼Œå®ƒçš„ä¸‹ä¸€ä¸ªæœ‰åºèŠ‚ç‚¹åˆ™ä¸º /lock/node-0000000001ï¼Œä»¥æ­¤ç±»æ¨ã€‚

### 3. ç›‘å¬å™¨

ä¸ºä¸€ä¸ªèŠ‚ç‚¹æ³¨å†Œç›‘å¬å™¨ï¼Œåœ¨èŠ‚ç‚¹çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œä¼šç»™å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯ã€‚

### 4. åˆ†å¸ƒå¼é”å®ç°

- åˆ›å»ºä¸€ä¸ªé”ç›®å½• /lockï¼›
- å½“ä¸€ä¸ªå®¢æˆ·ç«¯éœ€è¦è·å–é”æ—¶ï¼Œåœ¨ /lock ä¸‹åˆ›å»ºä¸´æ—¶çš„ä¸”æœ‰åºçš„å­èŠ‚ç‚¹ï¼›
-  å®¢æˆ·ç«¯è·å– /lock ä¸‹çš„å­èŠ‚ç‚¹åˆ—è¡¨ï¼Œåˆ¤æ–­è‡ªå·±åˆ›å»ºçš„å­èŠ‚ç‚¹æ˜¯å¦ä¸ºå½“å‰å­èŠ‚ç‚¹åˆ—è¡¨ä¸­åºå·æœ€å°çš„å­èŠ‚ç‚¹ï¼Œå¦‚æœæ˜¯åˆ™è®¤ä¸ºè·å¾—é”ï¼›å¦åˆ™ç›‘å¬è‡ªå·±çš„å‰ä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œè·å¾—å­èŠ‚ç‚¹çš„å˜æ›´é€šçŸ¥åé‡å¤æ­¤æ­¥éª¤ç›´è‡³è·å¾—é”ï¼›
- æ‰§è¡Œä¸šåŠ¡ä»£ç ï¼Œå®Œæˆåï¼Œåˆ é™¤å¯¹åº”çš„å­èŠ‚ç‚¹ã€‚

### 5. ä¼šè¯è¶…æ—¶

å¦‚æœä¸€ä¸ªå·²ç»è·å¾—é”çš„ä¼šè¯è¶…æ—¶äº†ï¼Œå› ä¸ºåˆ›å»ºçš„æ˜¯ä¸´æ—¶èŠ‚ç‚¹ï¼Œæ‰€ä»¥è¯¥ä¼šè¯å¯¹åº”çš„ä¸´æ—¶èŠ‚ç‚¹ä¼šè¢«åˆ é™¤ï¼Œå…¶å®ƒä¼šè¯å°±å¯ä»¥è·å¾—é”äº†ã€‚å¯ä»¥çœ‹åˆ°ï¼ŒZookeeper åˆ†å¸ƒå¼é”ä¸ä¼šå‡ºç°æ•°æ®åº“çš„å”¯ä¸€ç´¢å¼•å®ç°çš„åˆ†å¸ƒå¼é”é‡Šæ”¾é”å¤±è´¥é—®é¢˜ã€‚

### 6. ç¾Šç¾¤æ•ˆåº”

ä¸€ä¸ªèŠ‚ç‚¹æœªè·å¾—é”ï¼Œåªéœ€è¦ç›‘å¬è‡ªå·±çš„å‰ä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œè¿™æ˜¯å› ä¸ºå¦‚æœç›‘å¬æ‰€æœ‰çš„å­èŠ‚ç‚¹ï¼Œé‚£ä¹ˆä»»æ„ä¸€ä¸ªå­èŠ‚ç‚¹çŠ¶æ€æ”¹å˜ï¼Œå…¶å®ƒæ‰€æœ‰å­èŠ‚ç‚¹éƒ½ä¼šæ”¶åˆ°é€šçŸ¥ï¼ˆç¾Šç¾¤æ•ˆåº”ï¼‰ï¼Œè€Œæˆ‘ä»¬åªå¸Œæœ›å®ƒçš„åä¸€ä¸ªå­èŠ‚ç‚¹æ”¶åˆ°é€šçŸ¥ã€‚

# äºŒã€åˆ†å¸ƒå¼äº‹åŠ¡

æŒ‡äº‹åŠ¡çš„æ“ä½œä½äºä¸åŒçš„èŠ‚ç‚¹ä¸Šï¼Œéœ€è¦ä¿è¯äº‹åŠ¡çš„ ACID ç‰¹æ€§ã€‚

ä¾‹å¦‚åœ¨ä¸‹å•åœºæ™¯ä¸‹ï¼Œåº“å­˜å’Œè®¢å•å¦‚æœä¸åœ¨åŒä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼Œå°±æ¶‰åŠåˆ†å¸ƒå¼äº‹åŠ¡ã€‚

## æœ¬åœ°æ¶ˆæ¯è¡¨

æœ¬åœ°æ¶ˆæ¯è¡¨ä¸ä¸šåŠ¡æ•°æ®è¡¨å¤„äºåŒä¸€ä¸ªæ•°æ®åº“ä¸­ï¼Œè¿™æ ·å°±èƒ½åˆ©ç”¨æœ¬åœ°äº‹åŠ¡æ¥ä¿è¯åœ¨å¯¹è¿™ä¸¤ä¸ªè¡¨çš„æ“ä½œæ»¡è¶³äº‹åŠ¡ç‰¹æ€§ï¼Œå¹¶ä¸”ä½¿ç”¨äº†æ¶ˆæ¯é˜Ÿåˆ—æ¥ä¿è¯æœ€ç»ˆä¸€è‡´æ€§ã€‚

1. åœ¨åˆ†å¸ƒå¼äº‹åŠ¡æ“ä½œçš„ä¸€æ–¹å®Œæˆå†™ä¸šåŠ¡æ•°æ®çš„æ“ä½œä¹‹åå‘æœ¬åœ°æ¶ˆæ¯è¡¨å‘é€ä¸€ä¸ªæ¶ˆæ¯ï¼Œæœ¬åœ°äº‹åŠ¡èƒ½ä¿è¯è¿™ä¸ªæ¶ˆæ¯ä¸€å®šä¼šè¢«å†™å…¥æœ¬åœ°æ¶ˆæ¯è¡¨ä¸­ã€‚
2. ä¹‹åå°†æœ¬åœ°æ¶ˆæ¯è¡¨ä¸­çš„æ¶ˆæ¯è½¬å‘åˆ° Kafka ç­‰æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œå¦‚æœè½¬å‘æˆåŠŸåˆ™å°†æ¶ˆæ¯ä»æœ¬åœ°æ¶ˆæ¯è¡¨ä¸­åˆ é™¤ï¼Œå¦åˆ™ç»§ç»­é‡æ–°è½¬å‘ã€‚
3. åœ¨åˆ†å¸ƒå¼äº‹åŠ¡æ“ä½œçš„å¦ä¸€æ–¹ä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­è¯»å–ä¸€ä¸ªæ¶ˆæ¯ï¼Œå¹¶æ‰§è¡Œæ¶ˆæ¯ä¸­çš„æ“ä½œã€‚

![img](/pics/76c7597a-8316-460d-b8fb-9752c4c43947.jpg"/> </div><br>

## 2PC

ä¸¤é˜¶æ®µæäº¤ï¼ˆTwo-phase Commitï¼Œ2PCï¼‰ï¼Œé€šè¿‡å¼•å…¥åè°ƒè€…ï¼ˆCoordinatorï¼‰æ¥åè°ƒå‚ä¸è€…çš„è¡Œä¸ºï¼Œå¹¶æœ€ç»ˆå†³å®šè¿™äº›å‚ä¸è€…æ˜¯å¦è¦çœŸæ­£æ‰§è¡Œäº‹åŠ¡ã€‚

### 1. è¿è¡Œè¿‡ç¨‹

#### 1.1 å‡†å¤‡é˜¶æ®µ

åè°ƒè€…è¯¢é—®å‚ä¸è€…äº‹åŠ¡æ˜¯å¦æ‰§è¡ŒæˆåŠŸï¼Œå‚ä¸è€…å‘å›äº‹åŠ¡æ‰§è¡Œç»“æœã€‚

![img](/pics/963fac12-4eac-4922-8a5f-f262c11f80fb.jpg" width="700px"> </div><br>

#### 1.2 æäº¤é˜¶æ®µ

å¦‚æœäº‹åŠ¡åœ¨æ¯ä¸ªå‚ä¸è€…ä¸Šéƒ½æ‰§è¡ŒæˆåŠŸï¼Œäº‹åŠ¡åè°ƒè€…å‘é€é€šçŸ¥è®©å‚ä¸è€…æäº¤äº‹åŠ¡ï¼›å¦åˆ™ï¼Œåè°ƒè€…å‘é€é€šçŸ¥è®©å‚ä¸è€…å›æ»šäº‹åŠ¡ã€‚

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨å‡†å¤‡é˜¶æ®µï¼Œå‚ä¸è€…æ‰§è¡Œäº†äº‹åŠ¡ï¼Œä½†æ˜¯è¿˜æœªæäº¤ã€‚åªæœ‰åœ¨æäº¤é˜¶æ®µæ¥æ”¶åˆ°åè°ƒè€…å‘æ¥çš„é€šçŸ¥åï¼Œæ‰è¿›è¡Œæäº¤æˆ–è€…å›æ»šã€‚

![img](/pics/9ffb82ad-9b7f-44df-b93f-fc8b3f4093a6.jpg" width="700px"> </div><br>

### 2. å­˜åœ¨çš„é—®é¢˜

#### 2.1 åŒæ­¥é˜»å¡

æ‰€æœ‰äº‹åŠ¡å‚ä¸è€…åœ¨ç­‰å¾…å…¶å®ƒå‚ä¸è€…å“åº”çš„æ—¶å€™éƒ½å¤„äºåŒæ­¥é˜»å¡çŠ¶æ€ï¼Œæ— æ³•è¿›è¡Œå…¶å®ƒæ“ä½œã€‚

#### 2.2 å•ç‚¹é—®é¢˜

åè°ƒè€…åœ¨ 2PC ä¸­èµ·åˆ°éå¸¸å¤§çš„ä½œç”¨ï¼Œå‘ç”Ÿæ•…éšœå°†ä¼šé€ æˆå¾ˆå¤§å½±å“ã€‚ç‰¹åˆ«æ˜¯åœ¨é˜¶æ®µäºŒå‘ç”Ÿæ•…éšœï¼Œæ‰€æœ‰å‚ä¸è€…ä¼šä¸€ç›´ç­‰å¾…ï¼Œæ— æ³•å®Œæˆå…¶å®ƒæ“ä½œã€‚

#### 2.3 æ•°æ®ä¸ä¸€è‡´

åœ¨é˜¶æ®µäºŒï¼Œå¦‚æœåè°ƒè€…åªå‘é€äº†éƒ¨åˆ† Commit æ¶ˆæ¯ï¼Œæ­¤æ—¶ç½‘ç»œå‘ç”Ÿå¼‚å¸¸ï¼Œé‚£ä¹ˆåªæœ‰éƒ¨åˆ†å‚ä¸è€…æ¥æ”¶åˆ° Commit æ¶ˆæ¯ï¼Œä¹Ÿå°±æ˜¯è¯´åªæœ‰éƒ¨åˆ†å‚ä¸è€…æäº¤äº†äº‹åŠ¡ï¼Œä½¿å¾—ç³»ç»Ÿæ•°æ®ä¸ä¸€è‡´ã€‚

#### 2.4 å¤ªè¿‡ä¿å®ˆ

ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹å¤±è´¥å°±ä¼šå¯¼è‡´æ•´ä¸ªäº‹åŠ¡å¤±è´¥ï¼Œæ²¡æœ‰å®Œå–„çš„å®¹é”™æœºåˆ¶ã€‚

# ä¸‰ã€CAP

åˆ†å¸ƒå¼ç³»ç»Ÿä¸å¯èƒ½åŒæ—¶æ»¡è¶³ä¸€è‡´æ€§ï¼ˆCï¼šConsistencyï¼‰ã€å¯ç”¨æ€§ï¼ˆAï¼šAvailabilityï¼‰å’Œåˆ†åŒºå®¹å¿æ€§ï¼ˆPï¼šPartition Toleranceï¼‰ï¼Œæœ€å¤šåªèƒ½åŒæ—¶æ»¡è¶³å…¶ä¸­ä¸¤é¡¹ã€‚

![img](/pics/c6fdb958-578d-4685-a5fa-400857be91d5.jpg" width="500px"> </div><br>

## ä¸€è‡´æ€§

ä¸€è‡´æ€§æŒ‡çš„æ˜¯å¤šä¸ªæ•°æ®å‰¯æœ¬æ˜¯å¦èƒ½ä¿æŒä¸€è‡´çš„ç‰¹æ€§ï¼Œåœ¨ä¸€è‡´æ€§çš„æ¡ä»¶ä¸‹ï¼Œç³»ç»Ÿåœ¨æ‰§è¡Œæ•°æ®æ›´æ–°æ“ä½œä¹‹åèƒ½å¤Ÿä»ä¸€è‡´æ€§çŠ¶æ€è½¬ç§»åˆ°å¦ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€ã€‚

å¯¹ç³»ç»Ÿçš„ä¸€ä¸ªæ•°æ®æ›´æ–°æˆåŠŸä¹‹åï¼Œå¦‚æœæ‰€æœ‰ç”¨æˆ·éƒ½èƒ½å¤Ÿè¯»å–åˆ°æœ€æ–°çš„å€¼ï¼Œè¯¥ç³»ç»Ÿå°±è¢«è®¤ä¸ºå…·æœ‰å¼ºä¸€è‡´æ€§ã€‚

## å¯ç”¨æ€§

å¯ç”¨æ€§æŒ‡åˆ†å¸ƒå¼ç³»ç»Ÿåœ¨é¢å¯¹å„ç§å¼‚å¸¸æ—¶å¯ä»¥æä¾›æ­£å¸¸æœåŠ¡çš„èƒ½åŠ›ï¼Œå¯ä»¥ç”¨ç³»ç»Ÿå¯ç”¨æ—¶é—´å æ€»æ—¶é—´çš„æ¯”å€¼æ¥è¡¡é‡ï¼Œ4 ä¸ª 9 çš„å¯ç”¨æ€§è¡¨ç¤ºç³»ç»Ÿ 99.99% çš„æ—¶é—´æ˜¯å¯ç”¨çš„ã€‚

åœ¨å¯ç”¨æ€§æ¡ä»¶ä¸‹ï¼Œè¦æ±‚ç³»ç»Ÿæä¾›çš„æœåŠ¡ä¸€ç›´å¤„äºå¯ç”¨çš„çŠ¶æ€ï¼Œå¯¹äºç”¨æˆ·çš„æ¯ä¸€ä¸ªæ“ä½œè¯·æ±‚æ€»æ˜¯èƒ½å¤Ÿåœ¨æœ‰é™çš„æ—¶é—´å†…è¿”å›ç»“æœã€‚

## åˆ†åŒºå®¹å¿æ€§

ç½‘ç»œåˆ†åŒºæŒ‡åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„èŠ‚ç‚¹è¢«åˆ’åˆ†ä¸ºå¤šä¸ªåŒºåŸŸï¼Œæ¯ä¸ªåŒºåŸŸå†…éƒ¨å¯ä»¥é€šä¿¡ï¼Œä½†æ˜¯åŒºåŸŸä¹‹é—´æ— æ³•é€šä¿¡ã€‚

åœ¨åˆ†åŒºå®¹å¿æ€§æ¡ä»¶ä¸‹ï¼Œåˆ†å¸ƒå¼ç³»ç»Ÿåœ¨é‡åˆ°ä»»ä½•ç½‘ç»œåˆ†åŒºæ•…éšœçš„æ—¶å€™ï¼Œä»ç„¶éœ€è¦èƒ½å¯¹å¤–æä¾›ä¸€è‡´æ€§å’Œå¯ç”¨æ€§çš„æœåŠ¡ï¼Œé™¤éæ˜¯æ•´ä¸ªç½‘ç»œç¯å¢ƒéƒ½å‘ç”Ÿäº†æ•…éšœã€‚

## æƒè¡¡

åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œåˆ†åŒºå®¹å¿æ€§å¿…ä¸å¯å°‘ï¼Œå› ä¸ºéœ€è¦æ€»æ˜¯å‡è®¾ç½‘ç»œæ˜¯ä¸å¯é çš„ã€‚å› æ­¤ï¼ŒCAP ç†è®ºå®é™…ä¸Šæ˜¯è¦åœ¨å¯ç”¨æ€§å’Œä¸€è‡´æ€§ä¹‹é—´åšæƒè¡¡ã€‚

å¯ç”¨æ€§å’Œä¸€è‡´æ€§å¾€å¾€æ˜¯å†²çªçš„ï¼Œå¾ˆéš¾ä½¿å®ƒä»¬åŒæ—¶æ»¡è¶³ã€‚åœ¨å¤šä¸ªèŠ‚ç‚¹ä¹‹é—´è¿›è¡Œæ•°æ®åŒæ­¥æ—¶ï¼Œ

- ä¸ºäº†ä¿è¯ä¸€è‡´æ€§ï¼ˆCPï¼‰ï¼Œä¸èƒ½è®¿é—®æœªåŒæ­¥å®Œæˆçš„èŠ‚ç‚¹ï¼Œä¹Ÿå°±å¤±å»äº†éƒ¨åˆ†å¯ç”¨æ€§ï¼›
- ä¸ºäº†ä¿è¯å¯ç”¨æ€§ï¼ˆAPï¼‰ï¼Œå…è®¸è¯»å–æ‰€æœ‰èŠ‚ç‚¹çš„æ•°æ®ï¼Œä½†æ˜¯æ•°æ®å¯èƒ½ä¸ä¸€è‡´ã€‚

![img](/pics/0b587744-c0a8-46f2-8d72-e8f070d67b4b.jpg"/> </div><br>

# å››ã€BASE

BASE æ˜¯åŸºæœ¬å¯ç”¨ï¼ˆBasically Availableï¼‰ã€è½¯çŠ¶æ€ï¼ˆSoft Stateï¼‰å’Œæœ€ç»ˆä¸€è‡´æ€§ï¼ˆEventually Consistentï¼‰ä¸‰ä¸ªçŸ­è¯­çš„ç¼©å†™ã€‚

BASE ç†è®ºæ˜¯å¯¹ CAP ä¸­ä¸€è‡´æ€§å’Œå¯ç”¨æ€§æƒè¡¡çš„ç»“æœï¼Œå®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šå³ä½¿æ— æ³•åšåˆ°å¼ºä¸€è‡´æ€§ï¼Œä½†æ¯ä¸ªåº”ç”¨éƒ½å¯ä»¥æ ¹æ®è‡ªèº«ä¸šåŠ¡ç‰¹ç‚¹ï¼Œé‡‡ç”¨é€‚å½“çš„æ–¹å¼æ¥ä½¿ç³»ç»Ÿè¾¾åˆ°æœ€ç»ˆä¸€è‡´æ€§ã€‚


## åŸºæœ¬å¯ç”¨

æŒ‡åˆ†å¸ƒå¼ç³»ç»Ÿåœ¨å‡ºç°æ•…éšœçš„æ—¶å€™ï¼Œä¿è¯æ ¸å¿ƒå¯ç”¨ï¼Œå…è®¸æŸå¤±éƒ¨åˆ†å¯ç”¨æ€§ã€‚

ä¾‹å¦‚ï¼Œç”µå•†åœ¨åšä¿ƒé”€æ—¶ï¼Œä¸ºäº†ä¿è¯è´­ç‰©ç³»ç»Ÿçš„ç¨³å®šæ€§ï¼Œéƒ¨åˆ†æ¶ˆè´¹è€…å¯èƒ½ä¼šè¢«å¼•å¯¼åˆ°ä¸€ä¸ªé™çº§çš„é¡µé¢ã€‚

## è½¯çŠ¶æ€

æŒ‡å…è®¸ç³»ç»Ÿä¸­çš„æ•°æ®å­˜åœ¨ä¸­é—´çŠ¶æ€ï¼Œå¹¶è®¤ä¸ºè¯¥ä¸­é—´çŠ¶æ€ä¸ä¼šå½±å“ç³»ç»Ÿæ•´ä½“å¯ç”¨æ€§ï¼Œå³å…è®¸ç³»ç»Ÿä¸åŒèŠ‚ç‚¹çš„æ•°æ®å‰¯æœ¬ä¹‹é—´è¿›è¡ŒåŒæ­¥çš„è¿‡ç¨‹å­˜åœ¨æ—¶å»¶ã€‚

## æœ€ç»ˆä¸€è‡´æ€§

æœ€ç»ˆä¸€è‡´æ€§å¼ºè°ƒçš„æ˜¯ç³»ç»Ÿä¸­æ‰€æœ‰çš„æ•°æ®å‰¯æœ¬ï¼Œåœ¨ç»è¿‡ä¸€æ®µæ—¶é—´çš„åŒæ­¥åï¼Œæœ€ç»ˆèƒ½è¾¾åˆ°ä¸€è‡´çš„çŠ¶æ€ã€‚

ACID è¦æ±‚å¼ºä¸€è‡´æ€§ï¼Œé€šå¸¸è¿ç”¨åœ¨ä¼ ç»Ÿçš„æ•°æ®åº“ç³»ç»Ÿä¸Šã€‚è€Œ BASE è¦æ±‚æœ€ç»ˆä¸€è‡´æ€§ï¼Œé€šè¿‡ç‰ºç‰²å¼ºä¸€è‡´æ€§æ¥è¾¾åˆ°å¯ç”¨æ€§ï¼Œé€šå¸¸è¿ç”¨åœ¨å¤§å‹åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ã€‚

åœ¨å®é™…çš„åˆ†å¸ƒå¼åœºæ™¯ä¸­ï¼Œä¸åŒä¸šåŠ¡å•å…ƒå’Œç»„ä»¶å¯¹ä¸€è‡´æ€§çš„è¦æ±‚æ˜¯ä¸åŒçš„ï¼Œå› æ­¤ ACID å’Œ BASE å¾€å¾€ä¼šç»“åˆåœ¨ä¸€èµ·ä½¿ç”¨ã€‚

# äº”ã€Paxos

ç”¨äºè¾¾æˆå…±è¯†æ€§é—®é¢˜ï¼Œå³å¯¹å¤šä¸ªèŠ‚ç‚¹äº§ç”Ÿçš„å€¼ï¼Œè¯¥ç®—æ³•èƒ½ä¿è¯åªé€‰å‡ºå”¯ä¸€ä¸€ä¸ªå€¼ã€‚

ä¸»è¦æœ‰ä¸‰ç±»èŠ‚ç‚¹ï¼š

- æè®®è€…ï¼ˆProposerï¼‰ï¼šæè®®ä¸€ä¸ªå€¼ï¼›
- æ¥å—è€…ï¼ˆAcceptorï¼‰ï¼šå¯¹æ¯ä¸ªæè®®è¿›è¡ŒæŠ•ç¥¨ï¼›
- å‘ŠçŸ¥è€…ï¼ˆLearnerï¼‰ï¼šè¢«å‘ŠçŸ¥æŠ•ç¥¨çš„ç»“æœï¼Œä¸å‚ä¸æŠ•ç¥¨è¿‡ç¨‹ã€‚

![img](/pics/b988877c-0f0a-4593-916d-de2081320628.jpg"/> </div><br>

## æ‰§è¡Œè¿‡ç¨‹

è§„å®šä¸€ä¸ªæè®®åŒ…å«ä¸¤ä¸ªå­—æ®µï¼š[n, v]ï¼Œå…¶ä¸­ n ä¸ºåºå·ï¼ˆå…·æœ‰å”¯ä¸€æ€§ï¼‰ï¼Œv ä¸ºæè®®å€¼ã€‚

### 1. Prepare é˜¶æ®µ

ä¸‹å›¾æ¼”ç¤ºäº†ä¸¤ä¸ª Proposer å’Œä¸‰ä¸ª Acceptor çš„ç³»ç»Ÿä¸­è¿è¡Œè¯¥ç®—æ³•çš„åˆå§‹è¿‡ç¨‹ï¼Œæ¯ä¸ª Proposer éƒ½ä¼šå‘æ‰€æœ‰ Acceptor å‘é€ Prepare è¯·æ±‚ã€‚

![img](/pics/1a9977e4-2f5c-49a6-aec9-f3027c9f46a7.png"/> </div><br>

å½“ Acceptor æ¥æ”¶åˆ°ä¸€ä¸ª Prepare è¯·æ±‚ï¼ŒåŒ…å«çš„æè®®ä¸º [n1, v1]ï¼Œå¹¶ä¸”ä¹‹å‰è¿˜æœªæ¥æ”¶è¿‡ Prepare è¯·æ±‚ï¼Œé‚£ä¹ˆå‘é€ä¸€ä¸ª Prepare å“åº”ï¼Œè®¾ç½®å½“å‰æ¥æ”¶åˆ°çš„æè®®ä¸º [n1, v1]ï¼Œå¹¶ä¸”ä¿è¯ä»¥åä¸ä¼šå†æ¥å—åºå·å°äº n1 çš„æè®®ã€‚

å¦‚ä¸‹å›¾ï¼ŒAcceptor X åœ¨æ”¶åˆ° [n=2, v=8] çš„ Prepare è¯·æ±‚æ—¶ï¼Œç”±äºä¹‹å‰æ²¡æœ‰æ¥æ”¶è¿‡æè®®ï¼Œå› æ­¤å°±å‘é€ä¸€ä¸ª [no previous] çš„ Prepare å“åº”ï¼Œè®¾ç½®å½“å‰æ¥æ”¶åˆ°çš„æè®®ä¸º [n=2, v=8]ï¼Œå¹¶ä¸”ä¿è¯ä»¥åä¸ä¼šå†æ¥å—åºå·å°äº 2 çš„æè®®ã€‚å…¶å®ƒçš„ Acceptor ç±»ä¼¼ã€‚

![img](/pics/fb44307f-8e98-4ff7-a918-31dacfa564b4.jpg"/> </div><br>

å¦‚æœ Acceptor æ¥æ”¶åˆ°ä¸€ä¸ª Prepare è¯·æ±‚ï¼ŒåŒ…å«çš„æè®®ä¸º [n2, v2]ï¼Œå¹¶ä¸”ä¹‹å‰å·²ç»æ¥æ”¶è¿‡æè®® [n1, v1]ã€‚å¦‚æœ n1 > n2ï¼Œé‚£ä¹ˆå°±ä¸¢å¼ƒè¯¥æè®®è¯·æ±‚ï¼›å¦åˆ™ï¼Œå‘é€ Prepare å“åº”ï¼Œè¯¥ Prepare å“åº”åŒ…å«ä¹‹å‰å·²ç»æ¥æ”¶è¿‡çš„æè®® [n1, v1]ï¼Œè®¾ç½®å½“å‰æ¥æ”¶åˆ°çš„æè®®ä¸º [n2, v2]ï¼Œå¹¶ä¸”ä¿è¯ä»¥åä¸ä¼šå†æ¥å—åºå·å°äº n2 çš„æè®®ã€‚

å¦‚ä¸‹å›¾ï¼ŒAcceptor Z æ”¶åˆ° Proposer A å‘æ¥çš„ [n=2, v=8] çš„ Prepare è¯·æ±‚ï¼Œç”±äºä¹‹å‰å·²ç»æ¥æ”¶è¿‡ [n=4, v=5] çš„æè®®ï¼Œå¹¶ä¸” n > 2ï¼Œå› æ­¤å°±æŠ›å¼ƒè¯¥æè®®è¯·æ±‚ï¼›Acceptor X æ”¶åˆ° Proposer B å‘æ¥çš„ [n=4, v=5] çš„ Prepare è¯·æ±‚ï¼Œå› ä¸ºä¹‹å‰æ¥æ”¶åˆ°çš„æè®®ä¸º [n=2, v=8]ï¼Œå¹¶ä¸” 2 <= 4ï¼Œå› æ­¤å°±å‘é€ [n=2, v=8] çš„ Prepare å“åº”ï¼Œè®¾ç½®å½“å‰æ¥æ”¶åˆ°çš„æè®®ä¸º [n=4, v=5]ï¼Œå¹¶ä¸”ä¿è¯ä»¥åä¸ä¼šå†æ¥å—åºå·å°äº 4 çš„æè®®ã€‚Acceptor Y ç±»ä¼¼ã€‚

![img](/pics/2bcc58ad-bf7f-485c-89b5-e7cafc211ce2.jpg"/> </div><br>

### 2. Accept é˜¶æ®µ

å½“ä¸€ä¸ª Proposer æ¥æ”¶åˆ°è¶…è¿‡ä¸€åŠ Acceptor çš„ Prepare å“åº”æ—¶ï¼Œå°±å¯ä»¥å‘é€ Accept è¯·æ±‚ã€‚

Proposer A æ¥æ”¶åˆ°ä¸¤ä¸ª Prepare å“åº”ä¹‹åï¼Œå°±å‘é€ [n=2, v=8] Accept è¯·æ±‚ã€‚è¯¥ Accept è¯·æ±‚ä¼šè¢«æ‰€æœ‰ Acceptor ä¸¢å¼ƒï¼Œå› ä¸ºæ­¤æ—¶æ‰€æœ‰ Acceptor éƒ½ä¿è¯ä¸æ¥å—åºå·å°äº 4 çš„æè®®ã€‚

Proposer B è¿‡åä¹Ÿæ”¶åˆ°äº†ä¸¤ä¸ª Prepare å“åº”ï¼Œå› æ­¤ä¹Ÿå¼€å§‹å‘é€ Accept è¯·æ±‚ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒAccept è¯·æ±‚çš„ v éœ€è¦å–å®ƒæ”¶åˆ°çš„æœ€å¤§æè®®ç¼–å·å¯¹åº”çš„ v å€¼ï¼Œä¹Ÿå°±æ˜¯ 8ã€‚å› æ­¤å®ƒå‘é€ [n=4, v=8] çš„ Accept è¯·æ±‚ã€‚

![img](/pics/9b838aee-0996-44a5-9b0f-3d1e3e2f5100.png"/> </div><br>

### 3. Learn é˜¶æ®µ

Acceptor æ¥æ”¶åˆ° Accept è¯·æ±‚æ—¶ï¼Œå¦‚æœåºå·å¤§äºç­‰äºè¯¥ Acceptor æ‰¿è¯ºçš„æœ€å°åºå·ï¼Œé‚£ä¹ˆå°±å‘é€ Learn æè®®ç»™æ‰€æœ‰çš„ Learnerã€‚å½“ Learner å‘ç°æœ‰å¤§å¤šæ•°çš„ Acceptor æ¥æ”¶äº†æŸä¸ªæè®®ï¼Œé‚£ä¹ˆè¯¥æè®®çš„æè®®å€¼å°±è¢« Paxos é€‰æ‹©å‡ºæ¥ã€‚

![img](/pics/bf667594-bb4b-4634-bf9b-0596a45415ba.jpg"/> </div><br>

## çº¦æŸæ¡ä»¶

### 1\. æ­£ç¡®æ€§

æŒ‡åªæœ‰ä¸€ä¸ªæè®®å€¼ä¼šç”Ÿæ•ˆã€‚

å› ä¸º Paxos åè®®è¦æ±‚æ¯ä¸ªç”Ÿæ•ˆçš„æè®®è¢«å¤šæ•° Acceptor æ¥æ”¶ï¼Œå¹¶ä¸” Acceptor ä¸ä¼šæ¥å—ä¸¤ä¸ªä¸åŒçš„æè®®ï¼Œå› æ­¤å¯ä»¥ä¿è¯æ­£ç¡®æ€§ã€‚

### 2\. å¯ç»ˆæ­¢æ€§

æŒ‡æœ€åæ€»ä¼šæœ‰ä¸€ä¸ªæè®®ç”Ÿæ•ˆã€‚

Paxos åè®®èƒ½å¤Ÿè®© Proposer å‘é€çš„æè®®æœç€èƒ½è¢«å¤§å¤šæ•° Acceptor æ¥å—çš„é‚£ä¸ªæè®®é æ‹¢ï¼Œå› æ­¤èƒ½å¤Ÿä¿è¯å¯ç»ˆæ­¢æ€§ã€‚

# å…­ã€Raft

Raft ä¹Ÿæ˜¯åˆ†å¸ƒå¼ä¸€è‡´æ€§åè®®ï¼Œä¸»è¦æ˜¯ç”¨æ¥ç«é€‰ä¸»èŠ‚ç‚¹ã€‚

## å•ä¸ª Candidate çš„ç«é€‰

æœ‰ä¸‰ç§èŠ‚ç‚¹ï¼šFollowerã€Candidate å’Œ Leaderã€‚Leader ä¼šå‘¨æœŸæ€§çš„å‘é€å¿ƒè·³åŒ…ç»™ Followerã€‚æ¯ä¸ª Follower éƒ½è®¾ç½®äº†ä¸€ä¸ªéšæœºçš„ç«é€‰è¶…æ—¶æ—¶é—´ï¼Œä¸€èˆ¬ä¸º 150ms\~300msï¼Œå¦‚æœåœ¨è¿™ä¸ªæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ° Leader çš„å¿ƒè·³åŒ…ï¼Œå°±ä¼šå˜æˆ Candidateï¼Œè¿›å…¥ç«é€‰é˜¶æ®µã€‚

- ä¸‹å›¾å±•ç¤ºä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿçš„æœ€åˆé˜¶æ®µï¼Œæ­¤æ—¶åªæœ‰ Follower æ²¡æœ‰ Leaderã€‚Node A ç­‰å¾…ä¸€ä¸ªéšæœºçš„ç«é€‰è¶…æ—¶æ—¶é—´ä¹‹åï¼Œæ²¡æ”¶åˆ° Leader å‘æ¥çš„å¿ƒè·³åŒ…ï¼Œå› æ­¤è¿›å…¥ç«é€‰é˜¶æ®µã€‚

![img](/pics/111521118015898.gif"/> </div><br>

- æ­¤æ—¶ Node A å‘é€æŠ•ç¥¨è¯·æ±‚ç»™å…¶å®ƒæ‰€æœ‰èŠ‚ç‚¹ã€‚

![img](/pics/111521118445538.gif"/> </div><br>

- å…¶å®ƒèŠ‚ç‚¹ä¼šå¯¹è¯·æ±‚è¿›è¡Œå›å¤ï¼Œå¦‚æœè¶…è¿‡ä¸€åŠçš„èŠ‚ç‚¹å›å¤äº†ï¼Œé‚£ä¹ˆè¯¥ Candidate å°±ä¼šå˜æˆ Leaderã€‚

![img](/pics/111521118483039.gif"/> </div><br>

- ä¹‹å Leader ä¼šå‘¨æœŸæ€§åœ°å‘é€å¿ƒè·³åŒ…ç»™ Followerï¼ŒFollower æ¥æ”¶åˆ°å¿ƒè·³åŒ…ï¼Œä¼šé‡æ–°å¼€å§‹è®¡æ—¶ã€‚

![img](/pics/111521118640738.gif"/> </div><br>

## å¤šä¸ª Candidate ç«é€‰

- å¦‚æœæœ‰å¤šä¸ª Follower æˆä¸º Candidateï¼Œå¹¶ä¸”æ‰€è·å¾—ç¥¨æ•°ç›¸åŒï¼Œé‚£ä¹ˆå°±éœ€è¦é‡æ–°å¼€å§‹æŠ•ç¥¨ã€‚ä¾‹å¦‚ä¸‹å›¾ä¸­ Node B å’Œ Node D éƒ½è·å¾—ä¸¤ç¥¨ï¼Œéœ€è¦é‡æ–°å¼€å§‹æŠ•ç¥¨ã€‚

![img](/pics/111521119203347.gif"/> </div><br>

- ç”±äºæ¯ä¸ªèŠ‚ç‚¹è®¾ç½®çš„éšæœºç«é€‰è¶…æ—¶æ—¶é—´ä¸åŒï¼Œå› æ­¤ä¸‹ä¸€æ¬¡å†æ¬¡å‡ºç°å¤šä¸ª Candidate å¹¶è·å¾—åŒæ ·ç¥¨æ•°çš„æ¦‚ç‡å¾ˆä½ã€‚

![img](/pics/111521119368714.gif"/> </div><br>

## æ•°æ®åŒæ­¥

- æ¥è‡ªå®¢æˆ·ç«¯çš„ä¿®æ”¹éƒ½ä¼šè¢«ä¼ å…¥ Leaderã€‚æ³¨æ„è¯¥ä¿®æ”¹è¿˜æœªè¢«æäº¤ï¼Œåªæ˜¯å†™å…¥æ—¥å¿—ä¸­ã€‚

![img](/pics/71550414107576.gif"/> </div><br>

- Leader ä¼šæŠŠä¿®æ”¹å¤åˆ¶åˆ°æ‰€æœ‰ Followerã€‚

![img](/pics/91550414131331.gif"/> </div><br>

- Leader ä¼šç­‰å¾…å¤§å¤šæ•°çš„ Follower ä¹Ÿè¿›è¡Œäº†ä¿®æ”¹ï¼Œç„¶åæ‰å°†ä¿®æ”¹æäº¤ã€‚

![img](/pics/101550414151983.gif"/> </div><br>

- æ­¤æ—¶ Leader ä¼šé€šçŸ¥çš„æ‰€æœ‰ Follower è®©å®ƒä»¬ä¹Ÿæäº¤ä¿®æ”¹ï¼Œæ­¤æ—¶æ‰€æœ‰èŠ‚ç‚¹çš„å€¼è¾¾æˆä¸€è‡´ã€‚

![img](/pics/111550414182638.gif"/> </div><br>

# å‚è€ƒ

- å€ªè¶…. ä» Paxos åˆ° ZooKeeper : åˆ†å¸ƒå¼ä¸€è‡´æ€§åŸç†ä¸å®è·µ [M]. ç”µå­å·¥ä¸šå‡ºç‰ˆç¤¾, 2015.
- [Distributed locks with Redis](https://redis.io/topics/distlock)
- [æµ…è°ˆåˆ†å¸ƒå¼é”](http://www.linkedkeeper.com/detail/blog.action?bid=1023)
- [åŸºäº Zookeeper çš„åˆ†å¸ƒå¼é”](http://www.dengshenyu.com/java/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F/2017/10/23/zookeeper-distributed-lock.html)
- [Raft: Understandable Distributed Consensus](http://thesecretlivesofdata.com/raft)
- [èŠèŠåˆ†å¸ƒå¼äº‹åŠ¡ï¼Œå†è¯´è¯´è§£å†³æ–¹æ¡ˆ](https://www.cnblogs.com/savorboard/p/distributed-system-transaction-consistency.html)
- [åˆ†å¸ƒå¼ç³»ç»Ÿçš„äº‹åŠ¡å¤„ç†](https://coolshell.cn/articles/10910.html)
- [æ·±å…¥ç†è§£åˆ†å¸ƒå¼äº‹åŠ¡](https://juejin.im/entry/577c6f220a2b5800573492be)
- [What is CAP theorem in distributed database system?](http://www.colooshiki.com/index.php/2017/04/20/what-is-cap-theorem-in-distributed-database-system/)
- [NEAT ALGORITHMS - PAXOS](http://harry.me/blog/2014/12/27/neat-algorithms-paxos/)
- [Paxos By Example](https://angus.nyc/2012/paxos-by-example/)





</br><div align="center">â­ï¸æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å· CyC2018ï¼Œåœ¨å…¬ä¼—å·åå°å›å¤å…³é”®å­— ğŸ“š **èµ„æ–™** å¯é¢†å–å¤ä¹ å¤§çº²ï¼Œè¿™ä»½å¤§çº²æ˜¯æˆ‘èŠ±äº†ä¸€æ•´å¹´æ—¶é—´æ•´ç†çš„é¢è¯•çŸ¥è¯†ç‚¹åˆ—è¡¨ï¼Œä¸ä»…ç³»ç»Ÿæ•´ç†äº†é¢è¯•çŸ¥è¯†ç‚¹ï¼Œè€Œä¸”æ ‡æ³¨äº†å„ä¸ªçŸ¥è¯†ç‚¹çš„é‡è¦ç¨‹åº¦ï¼Œä»è€Œå¸®ä½ ç†æ¸…å¤šè€Œæ‚çš„é¢è¯•çŸ¥è¯†ç‚¹ã€‚å¯ä»¥è¯´æˆ‘åŸºæœ¬æ˜¯æŒ‰ç…§è¿™ä»½å¤§çº²æ¥è¿›è¡Œå¤ä¹ çš„ï¼Œè¿™ä»½å¤§çº²å¯¹æˆ‘æ‹¿åˆ°äº† BAT å¤´æ¡ç­‰ Offer èµ·åˆ°å¾ˆå¤§çš„å¸®åŠ©ã€‚ä½ ä»¬å®Œå…¨å¯ä»¥å’Œæˆ‘ä¸€æ ·æ ¹æ®å¤§çº²ä¸Šåˆ—çš„çŸ¥è¯†ç‚¹æ¥è¿›è¡Œå¤ä¹ ï¼Œå°±ä¸ç”¨çœ‹å¾ˆå¤šä¸é‡è¦çš„å†…å®¹ï¼Œä¹Ÿå¯ä»¥çŸ¥é“å“ªäº›å†…å®¹å¾ˆé‡è¦ä»è€Œå¤šå®‰æ’ä¸€äº›å¤ä¹ æ—¶é—´ã€‚</div></br>
<div align="center"><img width="180px" src="https://cyc-1256109796.cos.ap-guangzhou.myqcloud.com/%E5%85%AC%E4%BC%97%E5%8F%B7.jpg"></img></div>
